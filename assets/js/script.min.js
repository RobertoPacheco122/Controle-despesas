(()=>{const e=document.querySelector(".main__list"),n=document.querySelector(".main__button--submit"),t=document.querySelector(".main__balance"),a=document.querySelector(".main__income"),c=document.querySelector(".main__expenses");class i{static transactionsAcc=0;constructor(e,n){this.name=document.querySelector(e).value,this.amount=document.querySelector(n).value,this.id=i.transactionsAcc,i.transactionsAcc+=1}static getBalanceInfo(){return{actual:i.cleanAmount(t.innerText),income:i.cleanAmount(a.innerText),expense:i.cleanAmount(c.innerText)}}static cleanAmount(e){return+e.replace(/([\sR$]+)/g,"")}static updateIncomeAmount(e,n){const c=i.cleanAmount(e),o=i.getBalanceInfo();let s,r;"increase"===n?(s=(c+o.income).toFixed(2),r=(c+o.actual).toFixed(2)):"decrease"===n&&(s=(o.income-c).toFixed(2),r=(o.actual-c).toFixed(2)),a.innerText=`R$ ${s}`,t.innerText=`R$ ${r}`}static updateExpenseAmount(e,n){const a=i.cleanAmount(e),o=i.getBalanceInfo();let s,r;"increase"===n?(s=(a+-o.expense).toFixed(2),r=(a+o.actual).toFixed(2)):"decrease"===n&&(s=o.expense+a,r=(o.actual-a).toFixed(2)),c.innerText=`R$ ${Math.abs(s).toFixed(2)}`,t.innerText=`R$ ${r}`}getTransactionType(){return this.amount.includes("-")?"expense":"income"}getFormatedAmount(){return"income"===this.getTransactionType()?`+ R$${this.amount}`:this.amount.replace("-","- R$")}createTransactionCard(){const e=document.createElement("li");return e.classList.add("main__transaction--card"),e.innerHTML=`\n      <div class="main--transaction--content">\n        <p class="main__name--transaction">${this.name}</p>\n        <span class="main__value--transaction">${this.getFormatedAmount(this.getTransactionType())}</span>\n      </div>\n      <div class="main--transaction--color ${this.getTransactionType()}"></div>\n    `,e}addTransactionCardEvent(e){e.addEventListener("dblclick",(e=>{const n=e.currentTarget.querySelector(".main__value--transaction").innerText;"income"===this.getTransactionType()?i.updateIncomeAmount(n,"decrease"):i.updateExpenseAmount(n,"decrease"),e.currentTarget.remove()}))}addTransactionIntoDom(){const n=this.createTransactionCard();e.appendChild(n),"income"===this.getTransactionType()?i.updateIncomeAmount(this.amount,"increase"):i.updateExpenseAmount(this.amount,"increase"),this.addTransactionCardEvent(n)}init(){return this.name&&this.amount&&this.addTransactionIntoDom(),this}}n.addEventListener("click",(function(e){e.preventDefault(),new i("#name","#value").init()}))})();